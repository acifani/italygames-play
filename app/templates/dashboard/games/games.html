{% import "bootstrap/utils.html" as utils %}
{% extends "base.html" %}
{% block body %}
  <div class="content-section">
    <div class="outer">
      <div class="middle">
        <div class="inner">
          <br/>
          <h1 style="text-align:center;">Games</h1>
          {% if games.items %}
            <hr class="intro-divider">
            <div class="center">
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th width="70%"> Name
                    <th width="15%"> User Count
                    <th width="15%"> Follow
                <tbody>
                {% for game in games.items %}
                  <tr>
                    <td>
                      <a href="{{ url_for('dashboard.view_game', id=game.id) }}">
                        {{ game.name }}</a>
                    <td>
                      <a href="{{ url_for('dashboard.view_users_per_game', game_id=game.id) }}">
                        {{ game.users.count() }}</a>
                    <td>
                      {% if game in current_user.games %}
                        <a href="{{ url_for('dashboard.unfollow_game', game_id=game.id, user_id=current_user.id) }}">
                          <i class="fa fa-minus"></i> Unfollow</a>
                      {% else %}
                        <a href="{{ url_for('dashboard.follow_game', game_id=game.id, user_id=current_user.id) }}">
                          <i class="fa fa-plus"></i> Follow</a>
                      {% endif %}
                {% endfor %}
              </table>
              <nav>
                <ul class="pager">
                  {% if games.has_prev %}
                    <li class="previous">
                      <a href="{{ url_for('dashboard.list_games', page=games.prev_num) }}">
                        <span aria-hidden="true">&larr;</span>Previous</a>
                  {% else %}
                    <li class="previous disabled">
                      <a href="javascript:void(0)">
                        <span aria-hidden="true">&larr;</span>Previous</a>
                  {% endif %}

                  {% if games.has_next %}
                    <li class="next">
                      <a href="{{ url_for('dashboard.list_games', page=games.next_num) }}">
                        Next <span aria-hidden="true">&rarr;</span></a>
                  {% else %}
                    <li class="next disabled">
                      <a href="javascript:void(0)">
                        Next <span aria-hidden="true">&rarr;</span></a>
                  {% endif %}
                </ul>
              </nav>
            </div>
          {% else %}
            <div style="text-align: center">
            <h3> No games have been added. </h3>
            <hr class="intro-divider">
          {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
